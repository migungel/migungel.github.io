"use strict";(self.webpackChunkappDvnet=self.webpackChunkappDvnet||[]).push([[559],{3559:(k,m,l)=>{l.r(m),l.d(m,{AuthenticationModule:()=>x});var u=l(9808),e=l(5e3);let g=(()=>{class t{canDeactivate(o,n,a,i){return!!o.getHasChange()||confirm("\xbfDesea abandonar esta p\xe1gina sin guardar los cambios?")}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var r=l(3075);function d(t,s){1&t&&(e.TgZ(0,"small",14),e._uU(1," Ingrese una contrase\xf1a, minimo 6 caracteres "),e.qZA())}function h(t,s){1&t&&(e.TgZ(0,"small",14),e._uU(1," Las contrase\xf1as no coinciden "),e.qZA())}let f=(()=>{class t{constructor(o){this.formBuilder=o,this.visible=!0,this.changeType=!0,this.passwords={},this.passForm=this.formBuilder.group({password1:["",[r.kI.required,r.kI.minLength(6),r.kI.maxLength(20)]],password2:["",[r.kI.required,r.kI.minLength(6),r.kI.maxLength(20)]]})}ngOnInit(){}changePass(){if(this.passForm.markAllAsTouched(),!this.passForm.valid)return;let o=this.passForm.value.password1,n=this.passForm.value.password2;o===n&&(this.passwords={user:o,pass:n},this.hasChange=!1,console.log("pass changed"))}checkMatchValidator(o,n){return function(a){let i=a.get(o).value,p=a.get(n).value;return""!==i&&i!==p?{notMatch:`value ${i} is not equal to ${n}`}:null}}validateMatch(o,n){return this.passForm.controls[o].value!=this.passForm.controls[n].value}validatePass(o){return this.passForm.controls[o].errors&&this.passForm.controls[o].touched}viewPass(){this.visible=!this.visible,this.changeType=!this.changeType}getHasChange(){return!this.hasChange}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(r.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-change-pass"]],decls:19,vars:5,consts:[[1,"set"],[1,"container"],[1,"row"],[1,"text-center"],["id","passwordForm",1,"formlogin",3,"formGroup","ngSubmit"],[1,"input-group"],["formControlName","password1","placeholder","New Password","autocomplete","off",1,"form-control","pwd1",3,"type","change"],[1,"input-group-append"],[1,"input-group-text","eyeicon",3,"click"],[3,"ngClass"],["class","error",4,"ngIf"],["type","password","formControlName","password2","placeholder","Repeat Password","autocomplete","off",1,"form-control","pwd2","mt-3"],[1,"text-center","mt-3"],["type","submit",1,"btn","btn-primary"],[1,"error"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Cambiar contrase\xf1a"),e.qZA(),e.TgZ(4,"div",2)(5,"p",3),e._uU(6,"Utilice el siguiente formulario para cambiar su contrase\xf1a."),e.qZA(),e.TgZ(7,"form",4),e.NdJ("ngSubmit",function(){return n.changePass()}),e.TgZ(8,"div",5)(9,"input",6),e.NdJ("change",function(){return n.hasChange=!0}),e.qZA(),e.TgZ(10,"div",7)(11,"span",8),e.NdJ("click",function(){return n.viewPass()}),e._UZ(12,"i",9),e.qZA()()(),e.YNc(13,d,2,0,"small",10),e._UZ(14,"input",11),e.YNc(15,h,2,0,"small",10),e.TgZ(16,"div",12)(17,"button",13),e._uU(18,"Cambiar"),e.qZA()()()()()()),2&o&&(e.xp6(7),e.Q6J("formGroup",n.passForm),e.xp6(2),e.Q6J("type",n.changeType?"password":"text"),e.xp6(3),e.Q6J("ngClass",n.visible?"bi bi-eye-fill":"bi bi-eye-slash-fill"),e.xp6(1),e.Q6J("ngIf",n.validatePass("password1")),e.xp6(2),e.Q6J("ngIf",n.validateMatch("password1","password2")))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,u.mk,u.O5],styles:[".set[_ngcontent-%COMP%]{background-color:#effff1!important;display:block;height:80%}.container[_ngcontent-%COMP%]{text-align:center;min-width:300px;max-width:40%;padding:2rem 3rem;border-radius:2.5rem;background-color:#fff;color:#000;position:absolute;top:30%;right:0;left:0}.pwd1[_ngcontent-%COMP%]{box-shadow:none;border-color:gray;border-right:none}.pwd2[_ngcontent-%COMP%]{box-shadow:none;border-color:gray}.eyeicon[_ngcontent-%COMP%]{background-color:#fff;border-color:gray}.example[_ngcontent-%COMP%]{width:100%}  .mat-focused .mat-form-field-label{color:green!important}  .mat-form-field-underline{background-color:green!important}  .mat-form-field-ripple{background-color:#fff!important}  .mat-form-field-empty.mat-form-field-label{color:#6e6e6e}  .mat-form-field-wrapper{margin-bottom:-1.25em}  .mat-form-field-appearance-outline .mat-form-field-outline{color:red!important}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:red!important}"]}),t})();var c=l(6696),v=l(9250),b=l(4863);function C(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"div",15)(1,"strong"),e._uU(2,"Error!"),e.qZA(),e._uU(3),e.TgZ(4,"button",16),e.NdJ("click",function(){return e.CHM(o),e.oxw().closeAlert()}),e.TgZ(5,"span",17),e._uU(6,"\xd7"),e.qZA()()()}if(2&t){const o=e.oxw();e.xp6(3),e.hij(" ",o.alerta," ")}}function _(t,s){1&t&&(e.TgZ(0,"small",18),e._uU(1," Ingrese una cedula v\xe1lida "),e.qZA())}function y(t,s){1&t&&(e.TgZ(0,"small",18),e._uU(1," Ingrese su contrase\xf1a "),e.qZA())}const w=[{path:"login",component:(()=>{class t{constructor(o,n,a,i){this.formBuilder=o,this.router=n,this.loginserv=a,this.storage=i,this.usuario="",this.password="",this.loginForm=this.formBuilder.group({usuario:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(10)]],password:["",[r.kI.required,r.kI.minLength(5),r.kI.maxLength(30)]]}),this.user={},this.error=!1,this.alerta="",this.visible=!0,this.changeType=!0}ngOnInit(){}autenticar(){this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.user={user:this.loginForm.value.usuario,pass:this.loginForm.value.password},this.loginserv.login(this.user).subscribe(o=>{const n=(new DOMParser).parseFromString(o,"text/xml");var a=n.getElementsByTagName("User_id")[0].textContent;if(a&&parseInt(a,10)>0){const i={name:n.getElementsByTagName("Name")[0].textContent,user_id:a,identification:n.getElementsByTagName("Identificacion")[0].textContent,sign:n.getElementsByTagName("Firma")[0].textContent};this.storage.saveDataJson("currentUser",i),this.router.navigateByUrl("/home")}else this.errorMsg()},o=>{this.errorMsg()}))}viewPass(){this.visible=!this.visible,this.changeType=!this.changeType}errorMsg(){this.error=!0,this.alerta="Usuario o clave incorrecto"}validarCampos(o){return this.loginForm.controls[o].errors&&this.loginForm.controls[o].touched}closeAlert(){this.error=!1}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(c.F0),e.Y36(v.r),e.Y36(b.U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:18,vars:6,consts:[[1,"container"],["action","",1,"formlogin",3,"formGroup","ngSubmit"],[1,"mb-3"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row"],[1,"mb-4"],["type","text","id","usuario","placeholder","C\xe9dula","formControlName","usuario",1,"form-control"],["class","error",4,"ngIf"],[1,"input-group","mb-1"],["id","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control",3,"type"],[1,"input-group-append"],[1,"input-group-text","eyeicon",3,"click"],[3,"ngClass"],[1,"text-center","mt-3"],["type","submit",1,"button-login"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"error"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.autenticar()}),e.TgZ(2,"h1",2),e._uU(3,"Iniciar sesi\xf3n"),e.qZA(),e.YNc(4,C,7,1,"div",3),e.TgZ(5,"div",4)(6,"div",5),e._UZ(7,"input",6),e.YNc(8,_,2,0,"small",7),e.qZA(),e.TgZ(9,"div",8),e._UZ(10,"input",9),e.TgZ(11,"div",10)(12,"span",11),e.NdJ("click",function(){return n.viewPass()}),e._UZ(13,"i",12),e.qZA()()(),e.YNc(14,y,2,0,"small",7),e.qZA(),e.TgZ(15,"div",13)(16,"button",14),e._uU(17,"Ingresar"),e.qZA()()()()),2&o&&(e.xp6(1),e.Q6J("formGroup",n.loginForm),e.xp6(3),e.Q6J("ngIf",n.error),e.xp6(4),e.Q6J("ngIf",n.validarCampos("usuario")),e.xp6(2),e.Q6J("type",n.changeType?"password":"text"),e.xp6(3),e.Q6J("ngClass",n.visible?"bi bi-eye-fill":"bi bi-eye-slash-fill"),e.xp6(1),e.Q6J("ngIf",n.validarCampos("password")))},directives:[r._Y,r.JL,r.sg,u.O5,r.Fj,r.JJ,r.u,u.mk],styles:[".formlogin[_ngcontent-%COMP%]{min-width:300px;max-width:60%;background:rgba(255,255,255,.15);padding:2rem 3rem;margin:auto;border-radius:2.5rem;background-color:#9ad3ff;color:#000;position:absolute;top:25%;right:0;left:0}.button-login[_ngcontent-%COMP%]{background-color:#00ddec;border-radius:35px;border:1px solid #00a4af;display:inline-block;cursor:pointer;color:#000;font-family:Arial;font-size:17px;padding:8px 20px;text-decoration:none;text-shadow:0px 1px 0px #00a4af}.button-login[_ngcontent-%COMP%]:hover{background-color:#00a4af}.button-login[_ngcontent-%COMP%]:active{position:relative;top:1px}.eyeicon[_ngcontent-%COMP%]{background-color:#fff;border:none}.form-control[_ngcontent-%COMP%]{box-shadow:none;border:none}"]}),t})()},{path:"password",component:f,canDeactivate:[g]},{path:"",redirectTo:"login"}];let T=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.Bz.forChild(w)],c.Bz]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,T]]}),t})()}}]);