"use strict";(self.webpackChunkappDvnet=self.webpackChunkappDvnet||[]).push([[639],{639:(x,g,s)=>{s.r(g),s.d(g,{AuthenticationModule:()=>C});var l=s(9808),r=s(3075),t=s(5e3),u=s(6696),m=s(9250),d=s(4863);function p(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",15)(1,"strong"),t._uU(2,"Error!"),t.qZA(),t._uU(3),t.TgZ(4,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeAlert()}),t.TgZ(5,"span",17),t._uU(6,"\xd7"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",e.alerta," ")}}function h(o,i){1&o&&(t.TgZ(0,"small",18),t._uU(1," Ingrese una cedula v\xe1lida "),t.qZA())}function f(o,i){1&o&&(t.TgZ(0,"small",18),t._uU(1," Ingrese su contrase\xf1a "),t.qZA())}const v=[{path:"login",component:(()=>{class o{constructor(e,n,a,c){this.formBuilder=e,this.router=n,this.loginserv=a,this.storage=c,this.usuario="",this.password="",this.loginForm=this.formBuilder.group({usuario:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(10)]],password:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(30)]]}),this.user={},this.error=!1,this.alerta="",this.visible=!0,this.changeType=!0}ngOnInit(){}autenticar(){this.loginForm.markAllAsTouched(),this.loginForm.valid&&(this.user={user:this.loginForm.value.usuario,pass:this.loginForm.value.password},this.loginserv.login(this.user).subscribe(e=>{const n=(new DOMParser).parseFromString(e,"text/xml");var a=n.getElementsByTagName("User_id")[0].textContent;if(a&&parseInt(a,10)>0){const c={name:n.getElementsByTagName("Name")[0].textContent,user_id:a,identification:n.getElementsByTagName("Identificacion")[0].textContent,sign:n.getElementsByTagName("Firma")[0].textContent};this.storage.saveDataJson("currentUser",c),this.router.navigateByUrl("/home")}else this.errorMsg()},e=>{this.errorMsg()}))}viewPass(){this.visible=!this.visible,this.changeType=!this.changeType}errorMsg(){this.error=!0,this.alerta="Usuario o clave incorrecto"}validarCampos(e){return this.loginForm.controls[e].errors&&this.loginForm.controls[e].touched}closeAlert(){this.error=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(u.F0),t.Y36(m.r),t.Y36(d.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:18,vars:6,consts:[[1,"container"],["action","",1,"fomlogin",3,"formGroup","ngSubmit"],[1,"mb-3"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"row"],[1,"mb-4"],["type","text","id","usuario","placeholder","C\xe9dula","formControlName","usuario",1,"form-control","shadow-none"],["class","error",4,"ngIf"],[1,"input-group","mb-1"],["id","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control","shadow-none",3,"type"],[1,"input-group-append"],[1,"input-group-text","eyeicon",3,"click"],[3,"ngClass"],[1,"text-center","mt-3"],["type","submit",1,"button-login"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"error"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return n.autenticar()}),t.TgZ(2,"h1",2),t._uU(3,"Iniciar sesi\xf3n"),t.qZA(),t.YNc(4,p,7,1,"div",3),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.YNc(8,h,2,0,"small",7),t.qZA(),t.TgZ(9,"div",8),t._UZ(10,"input",9),t.TgZ(11,"div",10)(12,"span",11),t.NdJ("click",function(){return n.viewPass()}),t._UZ(13,"i",12),t.qZA()()(),t.YNc(14,f,2,0,"small",7),t.qZA(),t.TgZ(15,"div",13)(16,"button",14),t._uU(17,"Ingresar"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.loginForm),t.xp6(3),t.Q6J("ngIf",n.error),t.xp6(4),t.Q6J("ngIf",n.validarCampos("usuario")),t.xp6(2),t.Q6J("type",n.changeType?"password":"text"),t.xp6(3),t.Q6J("ngClass",n.visible?"bi bi-eye-fill":"bi bi-eye-slash-fill"),t.xp6(1),t.Q6J("ngIf",n.validarCampos("password")))},directives:[r._Y,r.JL,r.sg,l.O5,r.Fj,r.JJ,r.u,l.mk],styles:[".fomlogin[_ngcontent-%COMP%]{min-width:300px;max-width:60%;background:rgba(255,255,255,.15);padding:2rem 3rem;margin:auto;border-radius:2.5rem;background-color:#9ad3ff;color:#000;position:absolute;top:25%;right:0;left:0}.button-login[_ngcontent-%COMP%]{background-color:#00ddec;border-radius:35px;border:1px solid #00a4af;display:inline-block;cursor:pointer;color:#000;font-family:Arial;font-size:17px;padding:8px 20px;text-decoration:none;text-shadow:0px 1px 0px #00a4af}.button-login[_ngcontent-%COMP%]:hover{background-color:#00a4af}.button-login[_ngcontent-%COMP%]:active{position:relative;top:1px}.eyeicon[_ngcontent-%COMP%]{background-color:#fff;border:none}.form-control[_ngcontent-%COMP%]{border:none}"]}),o})()},{path:"",redirectTo:"login"}];let b=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(v)],u.Bz]}),o})(),C=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[l.ez,b]]}),o})()}}]);